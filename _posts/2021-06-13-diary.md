---
layout: post
title: 2021-06-13
date: 2021-06-13 19:31
category: diary
---

ドコモショップに行って iPad の契約を切るついでに一人焼肉をしてきた。かなりリーズナブルな値段でおいしく食べられたしまた行きたい。

# Technology

#### 日記の更新遅滞にペナルティを課す
- 日記の更新が滞りすぎていて非常によろしくないので、GitHub Pages のレポジトリにその日の分の commit がない場合午前 3 時にスマホから「うまぴょい伝説」が大音量で流れて叩き起こされるように設定することにした。
- あるレポジトリに対して commit のリストを取得するのは簡単で、認証とかしなくても

{% highlight shell %}
curl \
  -H "Accept: application/vnd.github.v3+json" \
  https://api.github.com/repos/octocat/hello-world/commits
{% endhighlight %}

で簡単に取れる ([公式 Ref](https://docs.github.com/en/rest/reference/repos#list-commits) が分かりやすい)。これを使って最新のコミット日時を取得し、昨日午前 3 時以降に新規 commit があるかどうか判定する Google Apps Script を作成してデプロイし、GET されたときにその結果を返すような API を作っておいた。

- 音楽を流す部分は iOS のオートメーションを使った。iOS 14 からは実行確認なしで時刻をトリガーにできるようになったらしく嬉しい。午前 3 時になったら上記 API を叩き、コミットがなかったらミュージックアプリで音楽を流す、という方針で実現できた。

#### 土日に医局に行って勉強せざるを得ないようにする
- 休日家にいるとどうしてもダラダラしてしまって非常によろしくないので、とりあえず医局のデスクに行く習慣をつけたいと考えている。使っていないスマホを医局に置いておいて、朝アラームが鳴るようにすればさすがに止めに行くだろうと思い、土日 9 時に繰り返し設定した。
- しかし、深夜勤や日勤が入っているときなどは土日 9 時に業務中である可能性があるため、9 時より前に医局に寄っておいて「次回鳴動をスキップ」することになる。厄介なことに iPhone のアラームアプリには次回をスキップするような機能がなく、一度オフにすると翌日以降の繰り返し設定も失われてしまう。
- というわけで、この次回スキップ機能を自分でなんとかすることにした。ショートカットを作成し、実行時の時刻が 9 時より前ならその日の 10 時まで「おやすみモード」、9 時より後なら次の日の 10 時まで「おやすみモード」にすることにより次回鳴動を阻止することができる。なお、純正のアラームはおやすみモードであろうがなかろうが構わず鳴るので、おやすみモードのときは鳴動できないサードパーティのアラームアプリを導入することにより実現できた。